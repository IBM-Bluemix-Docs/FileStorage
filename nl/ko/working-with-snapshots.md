---

copyright:
  years: 2014, 2019
lastupdated: "2019-02-05"

keywords: File Storage, file storage, NFS, snapshots, snapshot schedule, manual snapshot, snapshot space, snapshot quota

subcollection: FileStorage

---
{:new_window: target="_blank"}
{:pre: .pre}
{:tip: .tip}
{:note: .note}
{:important: .important}


# 스냅샷 관리
{: #managingSnapshots}

## 스냅샷 스케줄 작성

스냅샷 스케줄을 사용하여 스토리지 볼륨에 대한 특정 시점의 참조를 작성하는 빈도 및 시기를 결정합니다. 스토리지 볼륨당 최대 50개의 스냅샷을 보유할 수 있습니다. 스케줄은 [{{site.data.keyword.slportal}} ![외부 링크 아이콘](../../icons/launch-glyph.svg "외부 링크 아이콘")](https://control.softlayer.com/){:new_window}의 **스토리지** > **{{site.data.keyword.filestorage_short}}** 탭을 통해 관리합니다.

스토리지 볼륨의 초기 프로비저닝 중에 스냅샷 영역을 구매하지 않았으면, 우선 스냅샷 영역을 구매해야 초기 스케줄을 설정할 수 있습니다.
{:important}

### 스냅샷 스케줄 추가
{: #addschedule}

스냅샷 스케줄은 시간별, 일별, 주별 간격으로 설정될 수 있으며 각각에는 별도의 보유 주기가 있습니다. 스토리지 볼륨당 스냅샷의 최대 한계는 50개이며, 이는 시간별, 일별 및 주별 스케줄을 혼합할 수 있고 수동 스냅샷입니다.

1. 스토리지 볼륨을 클릭하고 **조치**를 클릭한 후 **스냅샷 스케줄**을 클릭하십시오.
2. 새 스케줄 스냅샷 창에서 세 가지 서로 다른 스냅샷 빈도 중에 선택할 수 있습니다. 세 가지를 조합하면 포괄적인 스냅샷 스케줄을 작성할 수 있습니다.
   - 시간별
      - 스냅샷을 작성하는 각 시간의 분을 지정하십시오. 기본값은 현재 분입니다.
      - 가장 오래된 스냅샷이 버려지기 전까지 보존되는 시간별 스냅샷의 수를 지정하십시오.
   - 일별
      - 스냅샷을 작성하는 시간 및 분을 지정하십시오. 기본값은 현재 시간 및 분입니다.
      - 가장 오래된 스냅샷이 버려지기 전까지 보존되는 시간별 스냅샷의 수를 선택하십시오.
   - 주별
      - 스냅샷을 작성하는 요일, 시 및 분을 지정하십시오. 기본값은 현재 요일, 시간 및 분입니다.
      - 가장 오래된 스냅샷이 버려지기 전까지 보존되는 주별 스냅샷의 수를 선택하십시오.
3. **저장**을 클릭하고 빈도가 다른 별도의 스케줄을 작성하십시오. 스케줄된 스냅샷의 총 수가 50개를 넘으면 경고 메시지가 수신되며 저장할 수 없습니다.

스냅샷이 작성되면 **세부사항** 페이지의 **스냅샷** 섹션에 스냅샷 목록이 표시됩니다.

또한 다음 명령을 사용하여 SLCLI를 통해 스냅샷 스케줄 목록을 볼 수 있습니다.
```
# slcli file snapshot-schedule-list --help
Usage: slcli file snapshot-schedule-list [OPTIONS] VOLUME_ID

  Lists snapshot schedules for a given volume

Options:
  -h, --help  Show this message and exit.
```

## 수동 스냅샷 작성

애플리케이션 업그레이드 또는 유지보수 중에 다양한 위치에서 수동 스냅샷을 작성할 수 있습니다. 애플리케이션 레벨에서 임시로 비활성화된 여러 서버에서 스냅샷을 작성할 수도 있습니다.

스토리지 볼륨당 수동 스냅샷의 최대 한계는 50입니다.

1. 스토리지 볼륨을 클릭하십시오.
2. **조치**를 클릭하십시오.
3. **수동 스냅샷 작성**을 클릭하십시오.
스냅샷이 작성되며 **세부사항** 페이지의 **스냅샷** 섹션에 표시됩니다. 해당 스케줄은 수동으로 표시됩니다.

또는 다음 명령을 사용하여 SLCLI를 통해 스냅샷을 작성할 수 있습니다.
```
# slcli file snapshot-create --help
Usage: slcli file snapshot-create [OPTIONS] VOLUME_ID

Options:
  -n, --notes TEXT  Notes to set on the new snapshot
  -h, --help        Show this message and exit.
```

## 모든 스냅샷을 사용 영역 정보 및 관리 기능과 함께 나열

보존된 스냅샷 및 사용된 영역의 목록은 **세부사항** 페이지에서 볼 수 있습니다(**스토리지**, **{{site.data.keyword.filestorage_short}}**). 관리 기능(스케줄 편집 및 영역 추가)은 세부사항 페이지에서 이 페이지에 있는 다양한 섹션의 **조치** 메뉴 또는 링크를 사용하여 수행됩니다.

또는 SLCLI를 통해 이 태스크를 완료할 수 있습니다.
```
# slcli file snapshot-list --help
Usage: slcli file snapshot-list [OPTIONS] VOLUME_ID

Options:
  --sortby TEXT   Column to sort by
  --columns TEXT  Columns to display. Options: id, name, created, size_bytes
  -h, --help      Show this message and exit.
```

## 보존된 스냅샷의 목록 보기

보존되는 스냅샷의 수는 스케줄을 설정할 때 **보존할 최근 스냅샷 수** 필드에 입력한 숫자를 기반으로 합니다. 작성된 스냅샷은 **스냅샷** 섹션에서 볼 수 있습니다. 스냅샷은 스케줄별로 나열됩니다.

## 사용된 스냅샷 영역의 양 보기

**세부사항** 페이지의 원형 차트에서는 사용된 영역의 양과 남은 영역의 양을 표시합니다. 영역 임계값인 75퍼센트, 90퍼센트 및 95퍼센트에 도달하면 알림을 받습니다.

## 볼륨의 스냅샷 영역 양 변경

이전에는 스냅샷 영역이 없었던 볼륨이나 추가 스냅샷 영역이 필요한 볼륨에 스냅샷 영역을 추가해야 할 수 있습니다. 필요에 따라 5 - 4,000GB를 추가할 수 있습니다.

스냅샷 영역은 늘리기만 가능합니다. 줄일 수는 없습니다. 필요한 영역의 양이 판별될 때까지는 보다 작은 양의 영역을 선택할 수 있습니다. 자동화된 스냅샷과 수동 스냅샷은 영역을 공유한다는 점을 기억하십시오.
{:important}

스냅샷 영역은 **스토리지** > **{{site.data.keyword.filestorage_short}}**를 통해 변경됩니다.

1. 스토리지 볼륨을 클릭하고 **조치**를 클릭한 후 **스냅샷 영역 추가**를 클릭하십시오.
2. 프롬프트의 크기의 범위에서 선택하십시오. 크기는 일반적으로 0 - 볼륨 크기의 범위입니다.
3. **계속**을 클릭하십시오.
4. 보유한 프로모션 코드를 입력하고 **재계산**을 클릭하십시오. 이 주문에 대한 요금 및 주문 검토 필드는 기본적으로 완료되어 있습니다.
5. **마스터 서비스 계약을 읽었습니다…** 선택란을 클릭하고 **주문하기**를 클릭하십시오. 몇 분 후에 추가 스냅샷 영역이 프로비저닝됩니다.

## 스냅샷 영역 한계에 도달하여 스냅샷이 삭제되는 경우 알림 수신

서로 다른 세 가지 영역 임계값인 75퍼센트, 90퍼센트 및 95퍼센트에 도달하면 계정의 마스터 사용자에게 지원 티켓을 통해 알림이 전송됩니다.

- **75퍼센트 용량**에서 스냅샷 영역 사용량이 75퍼센트를 초과했다는 경고가 전송됩니다. 경고에 대응하여 수동으로 영역을 추가하거나 불필요한 스냅샷을 삭제하면 조치가 기록되며 티켓이 닫힙니다. 아무 작업도 수행하지 않는 경우에는 티켓을 수동으로 수신확인하여 닫야야 합니다.
- **90퍼센트 용량**에서 스냅샷 영역 사용량이 90퍼센트를 초과하면 두 번째 경고가 전송됩니다. 75퍼센트 용량에 도달하는 경우와 같이, 필요한 조치를 수행하여 사용되는 영역을 줄이면 조치가 기록되며 티켓이 닫힙니다. 아무 작업도 수행하지 않는 경우에는 티켓을 수동으로 수신확인하여 닫야야 합니다.
- **95퍼센트 용량**에서 최종 경고가 전송됩니다. 영역 사용량을 임계값 아래로 떨어뜨리기 위한 어떠한 조치도 취하지 않으면 알림이 생성되며 향후 스냅샷이 작성될 수 있도록 자동 삭제가 수행됩니다. 가장 이전 스냅샷부터 시작하여 사용량이 95퍼센트 아래로 떨어질 때까지 스케줄된 스냅샷이 삭제됩니다. 스냅샷은 사용량이 95퍼센트를 초과할 때마다 임계값 아래로 떨어질 때까지 계속 삭제됩니다. 영역이 수동으로 증가되거나 스냅샷이 삭제되면 경고가 재설정되며, 임계값이 다시 초과되면 다시 발행됩니다. 이 경고는 아무 조치도 수행하지 않는 경우 수신되는 유일한 경고입니다.

## 스냅샷 스케줄 삭제

스냅샷 스케줄은 **스토리지** > **{{site.data.keyword.filestorage_short}}**를 통해 취소될 수 있습니다.

1. **세부사항** 페이지의 **스냅샷 스케줄** 프레임에서 삭제할 스케줄을 클릭하십시오.
2. 삭제할 스케줄 옆에 있는 선택란을 클릭하고 **저장**을 클릭하십시오.<br />

복제 기능을 사용 중인 경우에는 삭제 중인 스케줄이 복제에서 사용하는 스케줄이 아닌지 확인하십시오. 복제 스케줄을 삭제하는 데 관한 자세한 정보는 [여기](/docs/infrastructure/FileStorage?topic=FileStorage-replication)를 참조하십시오.
{:important}

## 스냅샷 삭제

향후 스냅샷을 위한 영역을 마련하기 위해 더 이상 필요하지 않은 스냅샷을 수동으로 제거할 수 있습니다. 삭제는 **스토리지** > **{{site.data.keyword.filestorage_short}}**를 통해 이루어집니다.

1. 스토리지 볼륨을 클릭하고 **스냅샷** 섹션으로 스크롤하여 기존 스냅샷의 목록을 보십시오.
2. 특정 스냅샷 옆에 있는 **조치**를 클릭하고 **삭제**를 클릭하여 스냅샷을 삭제하십시오. 스냅샷 간에는 종속성이 없으므로 이 삭제는 동일한 스케줄의 향후 또는 이전 스냅샷에 영향을 주지 않습니다.

또는 SLCLI를 통해 스냅샷을 삭제할 수 있습니다.
```
# slcli file snapshot-delete --help
Usage: slcli file snapshot-delete [OPTIONS] SNAPSHOT_ID

Options:
  -h, --help  Show this message and exit.
```

포털에서 수동으로 삭제되지 않은 수동 스냅샷은 영역 한계에 도달하면 가장 오래된 스냅샷부터 자동으로 삭제됩니다.
{:note}

## 스냅샷을 사용하여 스토리지 볼륨을 특정 시점으로 복원

사용자 오류 또는 데이터 손상으로 인해 스토리지 볼륨을 특정 시점으로 되돌려야 할 수 있습니다.

1. 호스트에서 스토리지 볼륨을 마운트 해제하고 분리하십시오.
   - 지시사항을 보려면 [여기](/docs/infrastructure/FileStorage?topic=FileStorage-mountingLinux)를 클릭하십시오.
2. [{{site.data.keyword.slportal}} ![외부 링크 아이콘](../../icons/launch-glyph.svg "외부 링크 아이콘")](https://control.softlayer.com/){:new_window}의 **스토리지**, **{{site.data.keyword.filestorage_short}}**를 클릭하십시오.
3. 아래로 화면을 이동하고 복원할 볼륨을 클릭하십시오. **세부사항** 페이지의 **스냅샷** 섹션에, 저장된 모든 스냅샷의 목록이 해당 크기 및 작성 날짜와 함께 표시됩니다.
4. 사용할 스냅샷 옆에 있는 **조치**를 클릭하고 **복원**을 클릭하십시오. <br/>

   복원을 완료하면 스냅샷을 작성한 이후 수정되거나 작성된 데이터가 유실됩니다. 이 데이터 손실은 스토리지 볼륨이 스냅샷 작성 시와 동일한 상태로 돌아가기 때문에 발생합니다.
   {:note}
5. **예**를 클릭하여 복원을 시작하십시오.

   선택된 스냅샷을 사용하여 볼륨이 복원되고 있음을 알리는 메시지가 페이지에 표시됩니다. 또한 활성 트랜잭션이 진행 중임을 나타내는 아이콘이 {{site.data.keyword.filestorage_short}}의 볼륨 옆에 표시됩니다. 아이콘 위로 마우스 커서를 이동하면 트랜잭션을 표시하는 창이 생성됩니다. 일단 트랜잭션이 완료되면 아이콘이 사라집니다.
   {:note}
6. 스토리지 볼륨을 호스트에 마운트하고 다시 연결하십시오.
  - 지시사항을 보려면 [여기](/docs/infrastructure/FileStorage?topic=FileStorage-mountingLinux)를 클릭하십시오.

또는 SLCLI를 통해 스냅샷으로 볼륨을 복원할 수 있습니다.
```
# slcli file snapshot-restore --help
Usage: slcli file snapshot-restore [OPTIONS] VOLUME_ID

Options:
  -s, --snapshot-id TEXT  The id of the snapshot which will be used to restore
                          the block volume
  -h, --help              Show this message and exit.
```  

볼륨을 복원하면 복원에 사용된 스냅샷 이후 작성된 모든 스냅샷이 삭제됩니다.
{:important}
