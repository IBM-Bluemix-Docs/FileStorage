---

copyright:
  years: 2015, 2018
lastupdated: "2018-08-01"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}

# 데이터 복제

스냅샷 및 복제 서비스는 기본적으로 Endurance {{site.data.keyword.filestorage_short}} 볼륨에서만 사용 가능합니다. Performance {{site.data.keyword.filestorage_short}}에는 이러한 기능이 없습니다. 

복제는 스냅샷 스케줄 중 하나를 사용하여 스냅샷을 원격 데이터 센터의 대상 볼륨으로 자동으로 복사합니다. 중대한 문제가 발생하거나 데이터가 손상되는 경우에는 원격 사이트로부터 사본을 복구할 수 있습니다. 

복제본을 사용하면 다음을 수행할 수 있습니다.

- 대상 볼륨으로 장애 복구하여 사이트 장애와 기타 장애에서 빠르게 복구합니다.
- DR 사본의 특정 시점으로 장애 복구합니다.

복제하려면 우선 스냅샷 스케줄을 작성해야 합니다. 장애 복구 시에 기본 데이터 센터의 스토리지 볼륨에서 원격 데이터 센터의 대상 볼륨으로 "스위치를 전환"합니다. 예를 들어, 기본 데이터 센터는 런던이고 보조 데이터 센터는 암스테르담입니다. 장애가 발생하면 암스테르담으로의 장애 복구가 실행되어 암스테르담의 컴퓨팅 인스턴스에서 현재 기본 볼륨으로 연결됩니다. 런던의 볼륨이 복구된 후에 암스테르담 볼륨의 스냅샷을 가져와 런던으로 장애 복구하고 런던의 컴퓨팅 인스턴스의 기본 볼륨으로 다시 연결합니다.


## 복제된 스토리지 볼륨의 원격 데이터 센터 결정

{{site.data.keyword.BluSoftlayer_full}}의 데이터 센터는 전세계에서 기본 및 원격의 조합으로 쌍을 이루고 있습니다.
데이터 센터 가용성 및 복제 대상의 전체 목록은 표 1을 참조하십시오.

<table>
	<caption style="text-align: left;"><p>표 1 - 이 표에서는 각 지역에 개선된 기능이 있는 데이터 센터의 전체 목록을 표시합니다. 모든 지역은 개별 열입니다. 일부 도시(예: 댈러스, 산호세, 워싱턴 DC, 암스테르담, 프랑크푸르트, 런던 및 시드니)에는 다수의 데이터 센터가 있습니다.</p>
		<p>&#42; 미국 1 지역의 데이터 센터에는 개선된 스토리지가 없습니다. 개선된 스토리지 기능이 있는 데이터 센터의 호스트는 미국 1 데이터 센터의 복제본 대상에 대해 복제를 <strong>시작할 수 없습니다</strong>. </p>
</caption>
	<thead>
		<tr>
			<th>미국 1 &#42;</th>
			<th>미국 2</th>
			<th>라틴 아메리카</th>
			<th>캐나다</th>
			<th>유럽</th>
			<th>아시아-태평양</th>
			<th>오스트레일리아</t>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>DAL01<br />
				DAL05<br />
				DAL06<br />
				HOU02<br />
				SJC01<br />
				WDC01<br />
				<br />
				<br />
				<br />
				<br />
				<br />
			</td>
			<td>SJC03<br />
			       SJC04<br />
			       WDC04<br />
			       WDC06<br />
			       WDC07<br />
			       DAL09<br />
				DAL10<br />
				DAL12<br />
				DAL13<br />
				<br /><br />
			</td>
			<td>MEX01<br />
				SAO01<br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
			</td>
			<td>TOR01<br />
				MON01<br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
			</td>
			<td>
				AMS01<br />
				AMS03<br />
				FRA02<br />
				FRA04<br />
				FRA05<br />
				LON02<br />
				LON04<br />
				LON06<br />
				OSL01<br />
				PAR01<br />
				MIL01<br />
			</td>
			<td>HKG02<br />
				TOK02<br />
				SNG01<br />
				SEO01<br />
                                CHE01<br />
				<br />
				<br />
				<br />
				<br />
				<br />
				<br />
			</td>
			<td>
				SYD01<br />
				SYD04<br />
				MEL01<br />
				<br /><br /><br /><br /><br /><br /><br /><br />
			</td>
		</tr>
	</tbody>
</table>


## 초기 복제본 작성

복제는 스냅샷 스케줄에 따라 이뤄집니다. 복제하려면 먼저 스냅샷 영역과 소스 볼륨에 대한 스냅샷 스케줄이 있어야 합니다. 복제를 설정하려는데 두 가지 중 하나가 없는 경우에는 추가 영역을 구매하거나 스케줄을 설정하라는 프롬프트가 표시됩니다. 복제는 [{{site.data.keyword.slportal}}](https://control.softlayer.com/){:new_window}의 **스토리지** > **{{site.data.keyword.filestorage_short}}** 아래에서 관리됩니다.

1. 스토리지 볼륨을 클릭하십시오.
2. **복제본**을 클릭하고 **복제 구매**를 클릭하십시오. 
3. 복제가 따르도록 할 기존 스냅샷 스케줄을 선택하십시오. 목록에는 모든 활성 스냅샷 스케줄이 있습니다. <br />
   >**참고** - 시간별, 일별 및 주별이 혼합된 스케줄이 있는 경우에도 하나의 스케줄만 선택할 수 있습니다. 이전 복제 주기 이후 캡처된 모든 스냅샷은 이를 발생시킨 스케줄에 관계없이 복제됩니다. <br />설정된 스냅샷이 없는 경우에는 복제를 주문하기 전에 이를 설정하라는 프롬프트가 표시됩니다. 세부사항은 [스냅샷 작업](snapshots.html)을 참조하십시오. 
3. **위치**를 클릭하고 DR 사이트인 데이터 센터를 선택하십시오. 
4. **계속**을 클릭하십시오.
5. **프로모션 코드**를 입력하고(있는 경우) **재계산**을 클릭하십시오. 창에 있는 다른 필드는 기본적으로 완료되어 있습니다. 
6. **마스터 서비스 계약을 읽었습니다…** 선택란을 클릭하고 **주문하기**를 클릭하십시오. 


## 기존 복제 편집

[{{site.data.keyword.slportal}}](https://control.softlayer.com/){:new_window}의 **스토리지** > **{{site.data.keyword.filestorage_short}}**에 있는 **기본** 또는 **복제본** 탭에서 복제 스케줄을 편집하고 복제 영역을 변경할 수 있습니다. 


## 복제 스케줄 편집

복제 스케줄은 기존 스냅샷 스케줄을 기반으로 합니다. 예를 들어, 시간별에서 주별로 복제본 스케줄을 변경하려면 복제 스케줄을 취소하고 새로 하나를 설정해야 합니다. 

스케줄 변경은 기본 또는 복제본 탭에서 수행할 수 있습니다. 

1. **기본** 또는 **복제본** 탭에서 **조치**를 클릭하십시오.
2. **스냅샷 스케줄 편집**을 선택하십시오.
3. **스케줄**에 있는 **스냅샷** 프레임을 보고 복제에 사용 중인 스케줄을 판별하십시오. 원하는 스케줄을 변경하십시오. 예를 들어, 복제 스케줄이 **일별**인 경우에는 복제가 수행되는 시간을 변경할 수 있습니다. 
4. **저장**을 클릭하십시오.


## 복제 영역 변경

기본 스냅샷 영역과 복제본 영역은 동일해야 합니다. **기본** 또는 **복제본** 탭에서 영역을 변경하면 소스 및 대상 데이터 센터 둘 다에서 영역이 자동으로 추가됩니다. 스냅샷 영역을 늘리면 즉각적 복제 업데이트 또한 트리거됩니다. 

1. **기본** 또는 **복제본** 탭에서 **조치**를 클릭하십시오.
2. **스냅샷 영역 더 추가**를 선택하십시오.
3. 목록에서 스토리지 크기를 선택하고 **계속**을 클릭하십시오. 
4. **프로모션 코드**(있는 경우)를 입력하고 **재계산**을 클릭하십시오. 대화 상자에 있는 다른 필드는 기본적으로 완료되어 있습니다. 
5. **마스터 서비스 계약을 읽었습니다…** 선택란을 클릭하고 **주문하기**를 클릭하십시오.


## 볼륨 목록에서 복제본 볼륨 보기

**스토리지** > **{{site.data.keyword.filestorage_short}}**에 있는 {{site.data.keyword.filestorage_short}} 페이지에서 복제 볼륨을 볼 수 있습니다. 이러한 볼륨의 이름에서는 기본 볼륨 이름이 있고 그 뒤에 REP가 있습니다. **유형**은 Endurance 또는 Performance - 복제본입니다. 복제본 볼륨이 복제본 데이터 센터에 마운트되지 않았으며 **상태**가 비활성이므로 **대상 주소**는 해당사항 없음입니다. 



## 복제본 데이터 센터에서 복제된 볼륨의 세부사항 보기

**스토리지** > **{{site.data.keyword.filestorage_short}}** 아래의 **복제본** 탭에서 복제본 볼륨 세부사항을 볼 수 있습니다. 다른 옵션은 **{{site.data.keyword.filestorage_short}}** 페이지에서 복제본 볼륨을 선택하고 **복제본** 탭을 클릭하는 것입니다. 


## 서버가 보조 데이터 센터로 장애 복구하기 전에 호스트 권한 부여 지정

권한 부여된 호스트 및 볼륨은 동일한 데이터 센터에 있어야 합니다. 복제본 볼륨은 런던에 두고 호스트는 암스테르담에 둘 수는 없습니다. 둘 다 런던에 있거나 둘 다 암스테르담에 있어야 합니다. 

1. **{{site.data.keyword.filestorage_short}}** 페이지에서 소스 또는 대상 볼륨을 클릭하십시오. 
2. **복제본**을 클릭하십시오. 
3. **호스트 권한 부여** 프레임으로 스크롤하여 오른쪽에 있는 **호스트 권한 부여**를 클릭하십시오. 
4. 복제에 대해 권한 부여되는 호스트에 강조표시하십시오. 다수의 호스트를 선택하려면 CTRL 키를 사용하여 해당되는 호스트를 클릭하십시오.
5. **제출**을 클릭하십시오. 호스트가 없는 경우에는 동일한 데이터 센터의 컴퓨팅 리소스를 구매하라는 프롬프트가 표시됩니다. 


## 기본 데이터 센터에서 스냅샷 영역이 늘어난 경우 복제본 데이터 센터에서 스냅샷 영역 늘리기

볼륨 크기는 기본 스토리지 볼륨과 복제본 스토리지 볼륨 간에 동일해야 합니다. 한 쪽이 다른 쪽보다 커서는 안 됩니다. 기본 볼륨의 스냅샷 영역을 늘리면 복제본 영역이 자동으로 늘어납니다. 스냅샷 영역을 늘리면 즉각적 복제 업데이트가 트리거됩니다. 두 볼륨의 증가는 청구서에 품목명으로 표시되며 필요에 따라 비례 배분됩니다. 

스냅샷 영역을 늘리는 방법을 알아보려면 [여기](snapshots.html)를 클릭하십시오. 


## 볼륨에서 해당 복제본으로 장애 복구 시작

장애가 발생하는 경우에는 대상 볼륨으로 **장애 복구**를 시작할 수 있습니다. 대상 볼륨이 활성이 됩니다. 마지막으로 복제된 스냅샷이 활성화되며 볼륨이 마운트를 위해 활성화됩니다. 이전 복제 주기 이후 소스 볼륨에 기록된 데이터는 유실됩니다. 장애 복구가 시작되면 복제 관계가 반전됩니다. 대상 볼륨이 소스 볼륨이 되고, 이전 소스 볼륨은 **REP**가 뒤따르는 **LUN 이름**으로 표시되는 대상이 됩니다. 

장애 복구는 [{{site.data.keyword.slportal}}](https://control.softlayer.com/){:new_window}의 **스토리지**, **{{site.data.keyword.filestorage_short}}**에서 시작됩니다. 

**이러한 단계를 진행하기 전에 볼륨의 연결을 끊으십시오. 이렇게 하지 않으면 손상 및 데이터 유실이 발생합니다. **

1. 활성 볼륨("소스")을 클릭하십시오. 
2. 오른쪽 상단에서 **복제본**을 클릭하고 **조치**를 클릭하십시오. 
3. **장애 복구**를 선택하십시오.
   >장애 복구가 진행 중임을 알리는 메시지가 표시됩니다. 또한 **{{site.data.keyword.filestorage_short}}**의 볼륨 옆에 활성 트랜잭션이 진행 중임을 나타내는 아이콘이 표시됩니다. 아이콘 위로 마우스 커서를 이동하면 트랜잭션을 표시하는 창이 생성됩니다. 일단 트랜잭션이 완료되면 아이콘이 사라집니다. 장애 복구 프로세스 중에는 구성 관련 조치가 읽기 전용입니다. 사용자는 스냅샷 스케줄을 편집하거나 스냅샷 영역을 변경할 수 없습니다. 이벤트는 복제 히스토리에 로깅됩니다.<br/> 대상 볼륨이 작동 상태가 되면 다른 메시지가 수신됩니다. 원래 소스 볼륨의 LUN 이름이 "REP"로 끝나도록 업데이트되며 해당 상태가 비활성이 됩니다. 
4. **모두 보기({{site.data.keyword.filestorage_short}})**를 클릭하십시오. 
5. 활성 볼륨(이전 대상 볼륨)을 클릭하십시오. 이제는 이 볼륨의 상태가 **활성**입니다. 
6. 스토리지 볼륨을 호스트에 마운트하고 이에 연결하십시오. 지시사항을 보려면 [여기](provisioning-file-storage.html)를 클릭하십시오.


## 볼륨에서 해당 복제본으로 장애 조치 시작

원래 소스 볼륨이 복구되면 원래 소스 볼륨으로 제어된 장애 조치를 시작할 수 있습니다. 제어된 장애 조치에서는 다음 항목이 적용됩니다. 

- 활성 소스 볼륨이 오프라인 상태가 됩니다. 
- 스냅샷이 작성됩니다. 
- 복제 주기가 완료됩니다. 
- 방금 작성된 데이터 스냅샷이 활성화됩니다. 
- 소스 볼륨이 마운트를 위해 활성화됩니다. 

장애 조치가 시작되면 복제 관계가 다시 반전됩니다. 소스 볼륨이 소스 볼륨으로 복원되고, 대상 볼륨이 다시 **REP**가 뒤따르는 **LUN 이름**으로 표시되는 대상 볼륨이 됩니다. 

장애 조치는 [{{site.data.keyword.slportal}}](https://control.softlayer.com/){:new_window}의 **스토리지**, **{{site.data.keyword.filestorage_short}}**에서 시작됩니다. 

1. 활성 볼륨("대상")을 클릭하십시오. 
2. 오른쪽 상단에서 **복제본**을 클릭하고 **조치**를 클릭하십시오. 
3. **장애 조치**를 선택하십시오. 
   >장애 복구가 진행 중임을 나타내는 메시지가 표시됩니다. 또한 **{{site.data.keyword.filestorage_short}}**의 볼륨 옆에 활성 트랜잭션이 진행 중임을 나타내는 아이콘이 표시됩니다. 아이콘 위로 마우스 커서를 이동하면 트랜잭션을 표시하는 창이 생성됩니다. 일단 트랜잭션이 완료되면 아이콘이 사라집니다. 장애 조치 프로세스 중에는 구성 관련 조치가 읽기 전용입니다. 사용자는 스냅샷 스케줄을 편집하거나 스냅샷 영역을 변경할 수 없습니다. 이벤트는 복제 히스토리에 로깅됩니다.
4. 오른쪽 상단에서 **모든 {{site.data.keyword.filestorage_short}} 보기** 링크를 클릭하십시오. 
5. 활성 볼륨("소스")을 클릭하십시오. 
6. 스토리지 볼륨을 호스트에 마운트하고 이에 연결하십시오. 지시사항을 보려면 [여기](provisioning-file-storage.html)를 클릭하십시오.


## 복제 히스토리 보기

복제 히스토리는 **관리** 아래 **계정** 탭을 통해 **감사 로그**에 표시됩니다. 기본 볼륨과 복제본 볼륨 모두 동일한 복제 히스토리를 표시하며 여기에는 다음이 포함됩니다.

- 복제 유형(장애 복구 또는 장애 조치)
- 시작 시점
- 복제에 사용된 스냅샷
- 복제의 크기
- 완료 시점


## 복제본의 복제 작성

기존 {{site.data.keyword.BluSoftlayer_full}} {{site.data.keyword.blockstoragefull}}의 복제를 작성할 수 있습니다. 복제 볼륨은 기본적으로 원래 LUN/볼륨의 용량 및 성능 옵션을 상속하며 스냅샷의 특정 시점까지의 데이터 사본을 보유합니다. 

복제는 기본 및 복제본 볼륨으로부터 작성될 수 있습니다. 새 복제는 원래 볼륨과 동일한 데이터 센터에 작성됩니다. 복제본 볼륨에서 복제를 작성하는 경우에는 새 볼륨이 복제본 볼륨과 동일한 데이터 센터에 작성됩니다. 

복제 볼륨은 스토리지가 프로비저닝되는 순간 읽기/쓰기를 위해 호스트에 의해 액세스될 수 있습니다. 그러나 스냅샷 및 복제는 원본에서 복제본으로 데이터 복사가 완료될 때까지 허용되지 않습니다. 

자세한 정보는 [복제 파일 볼륨 작성](how-to-create-duplicate-volume.html)을 참조하십시오. 


## 기존 복제 취소

복제는 즉시 취소하거나 청구가 종료되는 주기 날짜에 취소할 수 있습니다. 복제는 **기본** 또는 **복제본** 탭에서 취소 가능합니다.

1. **{{site.data.keyword.filestorage_short}}** 페이지에서 볼륨을 클릭하십시오.
2. **기본** 또는 **복제본** 탭에서 **조치**를 클릭하십시오.
3. **복제본 취소**를 선택하십시오.
4. 취소 시기를 선택하십시오. **즉시** 또는 **주기 날짜**를 선택하고 **계속**을 클릭하십시오. 
5. **취소로 인해 데이터가 유실될 수 있음을 인지함**을 클릭하고 **복제본 취소**를 클릭하십시오. 


## 기본 볼륨이 취소된 경우의 복제 취소

기본 볼륨이 취소되면 복제 데이터 센터의 볼륨 및 복제 스케줄이 삭제됩니다. 복제본은 **{{site.data.keyword.filestorage_short}}** 페이지에서 취소됩니다.

 1. **{{site.data.keyword.filestorage_short}}** 페이지에서 볼륨을 강조표시하십시오.
 2. **조치**를 클릭하고 **{{site.data.keyword.filestorage_short}} 취소**를 선택하십시오.
 3. 볼륨 취소 시점을 선택하십시오. **즉시** 또는 **주기 날짜**를 선택하고 **계속**을 클릭하십시오. 
 4. **취소로 인해 데이터가 유실될 수 있음을 인지함**을 클릭하고 **취소**를 클릭하십시오. 
